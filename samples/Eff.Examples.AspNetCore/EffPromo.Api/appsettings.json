{
  "Serilog": {
    "$schema":
      "https://gist.githubusercontent.com/turchenkoalex/ff9dc8443c3002eccf8df58020f82339/raw/6ae8d47908e49e0595694ea73e7f173ffb88cbf9/serilog-configuration-schema.json",
    "Using": [],
    "LevelSwitches": { "$seqLevel": "Warning" },
    "MinimumLevel": {
      "Default": "Information",
      "Override": {
        "Microsoft": "Warning",
        "Microsoft.AspNetCore": "Warning",
        "Microsoft.EntityFrameworkCore.Database.Command": "Information",
        "System": "Error"
      }
    },
    "Enrich": ["ThreadId", "ThreadName", "FromLogContext"],
    "WriteTo": [
      {
        "Name": "Console",
        "Args": {
          "theme": "Serilog.Sinks.SystemConsole.Themes.AnsiConsoleTheme::Code, Serilog.Sinks.Console",
          "restrictedToMinimumLevel": "Verbose"
        }
      },
      {
        "Name": "Debug"
      },
      {
        "Name": "Logger",
        "Args": {
          "configureLogger": {
            "WriteTo": [
              {
                "Name": "Seq",
                "Args": {
                  "serverUrl": "https://localhost",
                  "apiKey": "{REDUCTED}",
                  "restrictedToMinimumLevel": "Verbose",
                  "controlLevelSwitch": "$seqLevel",
                  "batchPostingLimit": 10,
                  "compact": true
                }
              },
              {
                "Name": "Async",
                "Args": {
                  "configure": [
                    {
                      "Name": "File",
                      "Args": {
                        "path": "eff.log",
                        "encoding": "System.Text.Encoding::UTF8",
                        "restrictedToMinimumLevel": "Warning",
                        "shared": true,
                        "retainedFileCountLimit": 5,
                        "fileSizeLimitBytes": 31457280,
                        "rollOnFileSizeLimit": true,
                        "rollingInterval": "Infinite"
                      }
                    }
                  ]
                }
              }
            ],
            "Filter": [
              {
                "Name": "ByExcluding",
                "Args": {
                  "expression": "SourceContext='Microsoft.Hosting.Lifetime' or SourceContext='Microsoft.EntityFrameworkCore.Database.Command'"
                }
              }
            ]
          }
        }
      }
    ]
  }
}
